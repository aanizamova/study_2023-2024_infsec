---
## Front matter
lang: ru-RU
title: " Лабораторная работа №5"
author: |
   "Низамова Альфия Айдаровна. НФИбд-01-20"\inst{1}

institute: |
  \inst{1}Российский Университет Дружбы Народов

date: 23 сентября, 2023, Москва, Россия

## Formatting
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
toc: false
slide_level: 2
theme: metropolis
header-includes: 
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'
 - '\beamer@ignorenonframefalse'
 - '\makeatother'
aspectratio: 43
section-titles: true

---

# Цель работы

## Цель работы:

Изучение механизмов изменения идентификаторов, применения
SetUID- и Sticky-битов. Получение практических навыков работы в консоли с дополнительными атрибутами. Рассмотрение работы механизма
смены идентификатора процессов пользователей, а также влияние бита
Sticky на запись и удаление файлов.


# Ход лабораторной работы. Создание программы. 

## 1
Войдем в систему от имени пользователя guest  
  
  ![Рис. 1]( img/1.png )
  
## 2
Создадим программу simpleid.c  
  
  ![Рис. 2]( img/2.png )

## 3-5
Скомплилируем программу и убедимся, что файл программы создан  
  
Выполним программу simpleid  

Выполним системную программу id
и сравним полученный результат с данными предыдущего пункта задания  
  
  ![Рис. 3]( img/3-5.png )

## 6
Усложним программу, добавив вывод действительных идентификаторов. Получившуюся программу назовем simpleid2.c  
  
  ![Рис. 4]( img/6.png )

## 7-9
Скомпилируем и запустим simpleid2.c 

От имени суперпользователя выполним заданные команды  

Используем sudo или повысим временно свои права с помощью su  
  
  ![Рис. 5]( img/7-9.png )  
  
## 10-11
Выполним проверку правильности установки новых атрибутов и смены
владельца файла simpleid2  

Запустим simpleid2 и id. Сравним результаты.  
  
  ![Рис. 6]( img/10-11.png )  

## 12
Проделаем то же самое относительно SetGID-бита  
  
  ![Рис. 7]( img/12.png )

## 13
Создадим программу readfile.c  
  
  ![Рис. 8]( img/13.png )
  
## 14-16
Откомпилируем её  

Сменим владельца у файла readfile.c и изменим права так, чтобы только суперпользователь (root) мог прочитать его, a guest не мог  

Проверим, что пользователь guest не может прочитать файл readfile.c  
  
  ![Рис. 9]( img/14-16.png )

## 17-18
Сменим у программы readfile владельца и установите SetU’D-бит

Проверим, может ли программа readfile прочитать файл readfile.c  
  
  ![Рис. 10]( img/17-18.png )
  
## 19
Проверим, может ли программа readfile прочитать файл /etc/shadow  
  
  ![Рис. 11]( img/19.png )
  
# Ход лабораторной работы. Исследование Sticky-бита.

## 1-3
Выясним, установлен ли атрибут Sticky на директории /tmp
  

От имени пользователя guest создадим файл file01.txt в директории /tmp
со словом test  

Просмотрим атрибуты у только что созданного файла и разрешим чтение и запись для категории пользователей «все остальные»  
  
  ![Рис. 12]( img/1-3.png )
## 4-6
От пользователя guest2 (не являющегося владельцем) попробуем прочитать файл /tmp/file01.txt  

От пользователя guest2 попробуем дозаписать в файл
/tmp/file01.txt слово test2. Выполнить операцию не удалось  

Проверим содержимое файла командой  
  
  ![Рис. 13]( img/4-6.png )
## 7-9
От пользователя guest2 попробуем записать в файл /tmp/file01.txt
слово test3, стерев при этом всю имеющуюся в файле информацию. Выполнить операцию не удалось  

Проверим содержимое файла командой   

От пользователя guest2 попробуем удалить файл /tmp/file01.txt. Удалить файл не удалось  
  
  ![Рис. 14]( img/7-99.png )
## 10-11
Повысим свои права до суперпользователя и выполним после этого команду, снимающую атрибут t (Sticky-бит) с директории /tmp  

Покинем режим суперпользователя  
  
  ![Рис. 15]( img/10-111.png )
## 12-14
От пользователя guest2 проверим, что атрибута t у директории /tmp
нет  

Повторим предыдущие шаги. Удалось удалить файл  

удалить файл от имени пользователя, не являющегося
его владельцем удалось.  
  
  ![Рис. 16]( img/12-14.png )
## 15
Повысим свои права до суперпользователя и вернем атрибут t на директорию /tmp  
  
  ![Рис. 17]( img/15.png )
# Выводы
Мы изучили механизмы изменения идентификаторов, применения
SetUID- и Sticky-битов. Получили практические навыки работы в консоли с дополнительными атрибутами. Рассмотрели работы механизма
смены идентификатора процессов пользователей, а также влияние бита
Sticky на запись и удаление файлов.